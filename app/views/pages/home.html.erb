<div style="display: none;">
    <%@timevalues = Exchangetimevalue.where("platform_id = '1' AND crypto_id = '1'") %>
    <%@alltimevalues = []%>
    <%@min = @timevalues[0].euro.to_f%>
    <%@max = @timevalues[0].euro.to_f%>
    <%@timevalues.each_with_index do |timeval, ind|%>
    <%=  @alltimevalues << [timeval.created_at.to_time.to_i,timeval.euro]%>
    <%  if timeval.euro < @min%>
      <%=    @min = timeval.euro.to_f%>
    <% end%>
    <% if timeval.euro > @max%>
      <%=    @max = timeval.euro.to_f%>
    <% end%>
    <%=  @min = @min%>
    <%=  @max = @max%>
    <%end%>


  <div id="demochartline"><%= @alltimevalues%></div>

  <div id="minval"><%= @min%></div>
  <div id="maxval"><%= @max%></div>


</div>


  <%= link_to "je veux sortir batard", destroy_user_session_path, method: :delete %>
<div class="page-wrapper">
   <main class="main-content" style="margin-bottom: 0px;">
      <!--/////////////////////////////// End navbar////////////////////////////-->
      <div class="content">
         <div class="container">
            <div class="row">
               <div class="col-md-6">
                  <div class="row">
                     <div class='col-md-12'>
                        <div class='card'>
                           <div class="card-top">
                              <h4 class="card-title">Line Chart</h4>
                           </div>
                           <div class='card-content'>
                              <div class="flot-chart1">
                                 <div class="flot-chart-content" id="flot-line-chart0"></div>
                              </div>
                           </div>
                        </div>
                     </div>
                     <div class='col-md-12'>
                        <div class='card'>
                           <div class="card-top">
                              <h4 class="card-title">Line Chart</h4>
                           </div>
                           <div class='card-content'>
                              <div class="flot-chart1">
                                 <div class="flot-chart-content" id="flot-line-chart1"></div>
                              </div>
                           </div>
                        </div>
                     </div>
                     <div class='col-md-12'>
                        <div class='card'>
                           <div class="card-top">
                              <h4 class="card-title">Line Chart</h4>
                           </div>
                           <div class='card-content'>
                              <div class="flot-chart1">
                                 <div class="flot-chart-content" id="flot-line-chart2"></div>
                              </div>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="col-md-6" >
                <div style="display: flex; flex-direction: column; justify-content: space-between;">
                  <div class="row">
                    <div class="col-md-12">
                      <div style="box-shadow: 0px 0px 20px rgba(0, 0, 0, .2); border-radius: 5px; padding-right: 5px; padding-left: 5px; margin-right: 15px; margin-left: 14px; margin-bottom: 26px;">
                        <div style="padding: 25px;">
                        <h4 class="card-title"> Service </h4>
                        <p style="color: black;">
                          Crypt easy est un comparateur en temps réel des principales plateformes de trading de crypto-monnaies.
Nous vous aidons à optimiser vos achats-revente de celles-ci pour maximiser vos profits.
                        </p>
                        </div>
                      </div>
                  </div>
                    <div class="col-md-12">
                      <%= render "devise/registrations/new" %>
                    </div>

                  </div>
                </div>
               </div>
            </div>
         </div>
         <!--container-->
      </div>
      <!--content-->
   </main>
   <!--main content-->
</div>

            <!--/////////////////////////////// End Content////////////////////////////-->



<%= content_for(:after_js) do %>
  <script type="text/javascript">
    var datas = document.getElementById("demochartline");


    var min = document.getElementById("minval");
    var max = document.getElementById("maxval");

    console.log(datas);
    console.log(max);
    console.log(min);


    min = min.innerHTML;
    max = max.innerHTML;
    datas = datas.innerHTML;


    min = JSON.parse(min);
    max = JSON.parse(max);
    datas = JSON.parse(datas);


if (document.getElementById("flot-line-chart0")) {
$(function() {
    var barOptions = {
        series: {
            lines: {
                show: true,
                lineWidth: 2,
                fill: true,
                fillColor: {
                    colors: [{
                        opacity: 0.0
                    }, {
                        opacity: 0.0
                    }]
                }
            }
        },
        xaxis: {
            tickDecimals: 0,
            mode: 'time'
        },
        yaxis: {
            tickDecimals: 2,
            min: min - 5.0,
            max: max + 5.0
        },
        colors: ["#0073ff"],
        grid: {
            color: "#999999",
            hoverable: true,
            clickable: true,
            tickColor: "#D4D4D4",
            borderWidth:0
        },
        legend: {
            show: true,
            position: "sw"
        },
        tooltip: true,
        tooltipOpts: {
            content: "x: %x, y: %y"
        }
    };


    var barData = {
        label: "BTC/EUR Kraken",
        tickDecimals: 2,
        data: datas,

    };
    $.plot($("#flot-line-chart0"), [barData], barOptions);

});

}
if (document.getElementById("flot-line-chart1")) {
$(function() {
    var barOptions = {
        series: {
            lines: {
                show: true,
                lineWidth: 2,
                fill: true,
                fillColor: {
                    colors: [{
                        opacity: 0.0
                    }, {
                        opacity: 0.0
                    }]
                }
            }
        },
        xaxis: {
            tickDecimals: 0,
            mode: 'time'
        },
        yaxis: {
            tickDecimals: 2,
            min: min0 - 0.5,
            max: max0 + 0.5
        },
        colors: ["#0073ff"],
        grid: {
            color: "#999999",
            hoverable: true,
            clickable: true,
            tickColor: "#D4D4D4",
            borderWidth:0
        },
        legend: {
            show: true,
            position: "sw"
        },
        tooltip: true,
        tooltipOpts: {
            content: "x: %x, y: %y"
        }
    };


    var barData = {
        label: "ETH/EUR Gdax",
        tickDecimals: 2,
        data: datas1,

    };
    $.plot($("#flot-line-chart1"), [barData], barOptions);

});
}

if (document.getElementById("flot-line-chart2")) {
$(function() {
    var barOptions = {
        series: {
            lines: {
                show: true,
                lineWidth: 2,
                fill: true,
                fillColor: {
                    colors: [{
                        opacity: 0.0
                    }, {
                        opacity: 0.0
                    }]
                }
            }
        },
        xaxis: {
            tickDecimals: 0,
            mode: 'time'
        },
        yaxis: {
            tickDecimals: 2,
            min: min1 - 0.5,
            max: max1 + 0.5
        },
        colors: ["#0073ff"],
        grid: {
            color: "#999999",
            hoverable: true,
            clickable: true,
            tickColor: "#D4D4D4",
            borderWidth:0
        },
        legend: {
            show: true,
            position: "sw"
        },
        tooltip: true,
        tooltipOpts: {
            content: "x: %x, y: %y"
        }
    };


    var barData = {
        label: "LTC/EUR Bitstamp",
        tickDecimals: 2,
        data: datas2,

    };
    $.plot($("#flot-line-chart2"), [barData], barOptions);

});
}
  </script>
<% end %>
