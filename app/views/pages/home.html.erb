

<div style="display: none;">

<%=valuedispatch = Exchangetimevalue.last(1440*3) %>

<%=@minimum = valuedispatch[0].euro%>
<%=@maximum = valuedispatch[0].euro%>

<%=@minimum1 = valuedispatch[1].euro%>
<%=@maximum1 = valuedispatch[1].euro%>

<%=@minimum2 = valuedispatch[2].euro%>
<%=@maximum2 = valuedispatch[2].euro%>


<%= @valueplat1 = []%>
<br>
<%= @valueplat2 = []%>
<br>
<%= @valueplat3 = []%>

<%valuedispatch.each do |value|%>
  <% if (value.platform_id == 1 && value.crypto_id == 1)%>
    <%= @valueplat1 << [value.created_at.to_time.to_i * 1000,value.euro]%>
    <%  if value.euro < @minimum%>
      <%=    @minimum = value.euro.to_f%>
    <% end%>
    <% if value.euro > @maximum%>
      <%=    @maximum = value.euro.to_f%>
    <% end%>
  <%end%>
  <%if (value.platform_id == 1 && value.crypto_id == 2)%>
    <%= @valueplat2 << [value.created_at.to_time.to_i * 1000,value.euro]%>
    <%  if value.euro < @minimum1%>
      <%=    @minimum1 = value.euro.to_f%>
    <% end%>
    <% if value.euro > @maximum1%>
      <%=    @maximum1 = value.euro.to_f%>
    <% end%>
  <%end%>
  <%if (value.platform_id == 1 && value.crypto_id == 3)%>
    <%= @valueplat3 << [value.created_at.to_time.to_i * 1000,value.euro]%>
        <%  if value.euro < @minimum2%>
      <%=    @minimum2 = value.euro.to_f%>
    <% end%>
    <% if value.euro > @maximum2%>
      <%=    @maximum2 = value.euro.to_f%>
    <% end%>
  <%end%>
<%end%>


  <div id="demochartline"><%= @valueplat1%></div>
  <div id="demochartline1"><%= @valueplat2%></div>
  <div id="demochartline2"><%= @valueplat3%></div>

  <div id="minval"><%= @minimum%></div>
  <div id="maxval"><%= @maximum%></div>

  <div id="minval1"><%= @minimum1%></div>
  <div id="maxval1"><%= @maximum1%></div>

  <div id="minval2"><%= @minimum2%></div>
  <div id="maxval2"><%= @maximum2%></div>


</div>


 
<div class="page-wrapper">
   <main class="main-content" style="margin-bottom: 0px;">
      <!--/////////////////////////////// End navbar////////////////////////////-->
      <div class="content">
         <div class="container">
            <div class="row">
               <div class="col-md-6">
                  <div class="row">
                     <div class='col-md-12 mb10'>
                        <div class='card'>
                           <div class="card-top">
                              <h4 class="card-title" style="color: #073f79;">BTC/EUR Kraken</h4>
                           </div>
                           <div class='card-content'>
                              <div class="flot-chart1">
                                 <div class="flot-chart-content" id="flot-line-chart0"></div>
                              </div>
                           </div>
                        </div>
                     </div>
                     <div class='col-md-12 mb10'>
                        <div class='card'>
                           <div class="card-top">
                              <h4 class="card-title" style="color: #073f79;">ETH/EUR Kraken</h4>
                           </div>
                           <div class='card-content'>
                              <div class="flot-chart1">
                                 <div class="flot-chart-content" id="flot-line-chart1"></div>
                              </div>
                           </div>
                        </div>
                     </div>
                     <div class='col-md-12 mb10'>
                        <div class='card'>
                           <div class="card-top">
                              <h4 class="card-title" style="color: #073f79;">LTC/EUR Kraken</h4>
                           </div>
                           <div class='card-content'>
                              <div class="flot-chart1">
                                 <div class="flot-chart-content" id="flot-line-chart2"></div>
                              </div>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="col-md-6" >
                <div class="card">
                  <div class="col-md-12 mb50">
                    <div>
                      <div style="padding: 25px;">
                      <h4 class="card-title" style="color: #073f79" > Service </h4>
                      <p style="color: black;">
                        Crypt easy est un comparateur en temps réel des principales plateformes de trading de crypto-monnaies.
                        Nous vous aidons à optimiser vos achats-revente de celles-ci pour maximiser vos profits.
                      </p>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-12">
                    <% if user_signed_in? %>
                    <!-- Ajouter résumé favoris -->
                      <div class="card text-center mb20" style="height: 380px">----> Add favourites here <----</div>
                    <!-- Fin résumé favoris -->
                    <% else %>
                      <%= render "devise/registrations/new" %>
                    <% end %>
                  </div>
                </div>
               </div>
            </div>
         </div>
         <!--container-->
      </div>
      <!--content-->
   </main>
   <!--main content-->
</div>

<div class="banner-fixed text-center mt40 mb80">

</div>


<div class="container text-center mb70" style="height: 200px; background-color: #E9EBEE;">
  <div class="row">
    <div class="col-xs-12 col-md-4 col-sm-3">
          <div class="card-content">
            <i class="fa fa-area-chart fa-4x mb20" style="color:gray" aria-hidden="true"></i>
            <p>Alacriter ductores sed bene feriens dolorem alacriter ordinibus locari gestu haut dolorem certamen in eum in terrebat.</p>
          </div>
      </div>
      <div class="col-xs-12 col-md-4 col-sm-3"">
          <div class="card-content">
            <i class="fa fa-area-chart fa-4x mb20" style="color:gray" aria-hidden="true"></i>
            <p>Alacriter ductores sed bene feriens dolorem alacriter ordinibus locari gestu haut dolorem certamen in eum in terrebat.</p>
          </div>
      </div>
      <div class="col-xs-12 col-md-4 col-sm-3"">
          <div class="card-content">
            <i class="fa fa-area-chart fa-4x mb20" style="color:gray" aria-hidden="true"></i>
            <p>Alacriter ductores sed bene feriens dolorem alacriter ordinibus locari gestu haut dolorem certamen in eum in terrebat.</p>
          </div>
      </div>
    </div>
  </div>
</div>



            <!--/////////////////////////////// End Content////////////////////////////-->



<%= content_for(:after_js) do %>
  <script type="text/javascript">
    var datas = document.getElementById("demochartline");
    var datas1 = document.getElementById("demochartline1");
    var datas2 = document.getElementById("demochartline2");


    var min = document.getElementById("minval");
    var max = document.getElementById("maxval");

    var min1 = document.getElementById("minval1");
    var max1 = document.getElementById("maxval1");

    var min2 = document.getElementById("minval2");
    var max2 = document.getElementById("maxval2");

    console.log(datas);
    console.log(max2);
    console.log(min2);


    min = min.innerHTML;
    max = max.innerHTML;

    min1 = min1.innerHTML;
    max1 = max1.innerHTML;

    min2 = min2.innerHTML;
    max2 = max2.innerHTML;

    datas = datas.innerHTML;
    datas1 = datas1.innerHTML;
    datas2 = datas2.innerHTML;


    min = JSON.parse(min);
    max = JSON.parse(max);

    min1 = JSON.parse(min1);
    max1 = JSON.parse(max1);

    min2 = JSON.parse(min2);
    max2 = JSON.parse(max2);

    datas = JSON.parse(datas);
    datas1 = JSON.parse(datas1);
    datas2 = JSON.parse(datas2);


if (document.getElementById("flot-line-chart0") && document.getElementById("demochartline")) {
$(function() {
    var barOptions = {
        series: {
            lines: {
                show: true,
                lineWidth: 2,
                fill: true,
                fillColor: {
                    colors: [{
                        opacity: 0.2
                    }, {
                        opacity: 0.2
                    }]
                }
            }
        },
        xaxis: {

            mode: 'time',
            unit: 'day',




        },
        yaxis: {
            tickDecimals: 2,
            min: min - ((max - min)/3),
            max: max + ((max - min)/3)
        },
        colors: ["#0073ff"],
        grid: {
            color: "#999999",
            hoverable: true,
            clickable: true,
            tickColor: "#D4D4D4",
            borderWidth:0
        },
        legend: {
            show: false,
            position: "sw"
        },
        tooltip: true,
        tooltipOpts: {
            content: "x: %x, y: %y",

        }
    };


    var barData = {
        label: "BTC/EUR Kraken",
        tickDecimals: 2,
        data: datas,

    };
    $.plot($("#flot-line-chart0"), [barData], barOptions);

});

}
if (document.getElementById("flot-line-chart1") && document.getElementById("demochartline1")) {
$(function() {
    var barOptions = {
        series: {
            lines: {
                show: true,
                lineWidth: 2,
                fill: true,
                fillColor: {
                    colors: [{
                        opacity: 0.2
                    }, {
                        opacity: 0.2
                    }]
                }
            }
        },
        xaxis: {
            mode: 'time',




        },
        yaxis: {
            tickDecimals: 2,
            min: min1 - ((max1 - min1)/3),
            max: max1 + ((max1 - min1)/3)
        },
        colors: ["#0073ff"],
        grid: {
            color: "#999999",
            hoverable: true,
            clickable: true,
            tickColor: "#D4D4D4",
            borderWidth:0
        },
        legend: {
            show: false,
            position: "sw"
        },
        tooltip: {
    tooltip: true
},
        tooltipOpts: {
            xDateFormat: '%H:%M',
            content: "x: %x, y: %y"
        }
    };


    var barData = {
        label: "ETH/EUR Gdax",
        tickDecimals: 2,
        data: datas1,

    };
    $.plot($("#flot-line-chart1"), [barData], barOptions);

});
}

if (document.getElementById("flot-line-chart2") && document.getElementById("demochartline2")) {
$(function() {
    var barOptions = {
        series: {
            lines: {
                show: true,
                lineWidth: 2,
                fill: true,
                fillColor: {
                    colors: [{
                        opacity: 0.2
                    }, {
                        opacity: 0.2
                    }]
                }
            }
        },
        xaxis: {
            mode: 'time',
            unit: 'day',

        },
        yaxis: {
            tickDecimals: 2,
            min: min2 - ((max2 - min2)/3),
            max: max2 + ((max2 - min2)/3)
        },
        colors: ["#0073ff"],
        grid: {
            color: "#999999",
            hoverable: true,
            clickable: true,
            tickColor: "#D4D4D4",
            borderWidth:0
        },
        legend: {
            show: false,
            position: "sw"
        },
        tooltip: true,
        tooltipOpts: {
            content: "x: %x, y: %y"
        }
    };


    var barData = {
        label: "LTC/EUR Bitstamp",
        tickDecimals: 2,
        data: datas2,

    };
    $.plot($("#flot-line-chart2"), [barData], barOptions);

});
}
  </script>
<% end %>
